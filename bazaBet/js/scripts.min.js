function declOfNum(o,e){var t=[2,0,1,1,1,2];return e[o%100>4&&o%100<20?2:t[o%10<5?o%10:5]]}function shootingStart(){if($(".zoomContainer").length)return void($(".shooting").hasClass("get")||$(".zoomContainer").show());$(".shooting__img").elevateZoom({zoomType:"lens",lensShape:"round",responsive:!0,lensSize:.01*$(window).width()*16.145833333333336,borderColour:"#00b140",borderSize:1})}function shootingHide(){_detectPhone()?TweenMax.to(".shooting",.6,{autoAlpha:0,display:"none"}):t2.reverse(),$("body").removeClass("shooting-cursor shooting-mode"),$(".zoomContainer").hide()}function TMScrollTo(o,e){TweenMax.to(window,.6,{scrollTo:o,onComplete:function(){e&&e()}})}function bgHeight(){$("[data-bgH]").each(function(o,e){var t=$(this).attr("data-bgH");"s2"===t&&$(".main__bg-s2").css("top",$("#s1").height()),"s3"===t&&$(".main__bg-s3").css("top",$("#s1").height()+$("#s2").height()),"s4"===t&&$(".main__bg-s4").css("top",$("#s1").height()+$("#s2").height()+$("#s3").height()+15),$(this).height($("#"+t).height())})}function menuBtnWatch(){var o=$(window).scrollTop(),e=$(".main__section"),t=$(".nav-bar__list-item"),n=$(".nav-menu__list-item");e.each(function(e,a){var s=$(a).offset().top,i=s+$(a).height();o>=s&&o<=i&&(t.removeClass("active"),n.removeClass("active"),$('.nav-menu__list-item a[href="#'+$(a).attr("id")+'"]').parent().addClass("active"),$('.nav-bar__list-item a[href="#'+$(a).attr("id")+'"]').parent().addClass("active"))})}function noscroll(){var o=$("html"),e=o.data("scroll-position");window.scrollTo(e[0],e[1])}function timerIncrement(){(idleTime+=1)>10&&TweenMax.to(".go-away__popup-container",.4,{autoAlpha:1})}function _detectPhone(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}$.fn.scrollEnd=function(o,e){$(this).scroll(function(){var t=$(this);t.data("scrollTimeout")&&clearTimeout(t.data("scrollTimeout")),t.data("scrollTimeout",setTimeout(o,e))})};var t1,t2,animActivated=!1,idleTime=0;$(function(){t1=new TimelineMax,t2=new TimelineMax({paused:!0,onComplete:function(){$("#shooting__map").imageMapResize()},onReverseComplete:function(){animActivated=!1}}).to(".s-1__title-big, .s-1__title-small, .s-1__text, .s-1__btn-greenLine, .s-1__btn-orange",.4,{autoAlpha:0,y:"50px",ease:Power1.easeInOut}).to(".main__bg-s1__gray3",.4,{y:"-100%",ease:Power1.easeInOut}).to(".main__bg-s1__gray2",.4,{y:"-100%",ease:Power1.easeInOut}).to(".main__bg-s1__gray1, .main__bg-s1__gray4",.4,{y:"-100%",ease:Power1.easeInOut}).to(".main__bg-s1__players",.4,{autoAlpha:0,y:"50%",ease:Power1.easeInOut}).to(".shooting",.6,{autoAlpha:1,display:"block"}),_detectPhone()||t1.fromTo(".header",.5,{autoAlpha:0,y:"-100%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut,delay:1}).fromTo(".nav-bar",.5,{autoAlpha:0,right:"-30px"},{autoAlpha:1,right:"1.5625vw",ease:Power1.easeInOut}).fromTo(".s-1__title-big",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__title-small",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__text",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__btn-greenLine, .s-1__btn-orange",.6,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power2.easeInOut});var o=$(window),e=[0,0],t=$("html");t.data("scroll-position",e),o.on("scroll mousewheel",function(o){return e=[o.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,o.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop],$(".nav-menu").hasClass("opened")?void window.addEventListener("scroll",noscroll):$("body").hasClass("shooting-mode")?void window.addEventListener("scroll",noscroll):$(".main").hasClass("bg-animation1")?void window.addEventListener("scroll",noscroll):(t.data("scroll-position",e),window.removeEventListener("scroll",noscroll),void menuBtnWatch())}),o.scrollEnd(function(){$("body").removeClass("scrolling")},50),o.on("mousewheel DOMMouseScroll",function(e){if(e.preventDefault(),!$(".nav-menu").hasClass("opened")&&!$("body").hasClass("shooting-mode")&&!$(".main").hasClass("bg-animation1")){menuBtnWatch();var t=$(document).height()-$(window).height(),n=o.scrollTop();n!==t&&0!==n&&$("body").addClass("scrolling");var a=e.originalEvent.wheelDelta/120||-e.originalEvent.detail/3,s=o.scrollTop(),i=s-parseInt(250*a);TweenMax.to(o,.7,{scrollTo:{y:i,autoKill:!0},ease:Power1.easeOut,autoKill:!0,overwrite:5})}}),$(window).on("resize",function(){$(".zoomContainer").remove(),$(".shooting__img").elevateZoom({zoomType:"lens",lensShape:"round",responsive:!0,lensSize:.01*$(window).width()*16.145833333333336,borderColour:"#00b140",borderSize:1}),bgHeight()}),$(document).on("mousemove",function(o){var e=o.pageX,t=o.pageY;$(".shooting__map-target").each(function(o,n){for(var a,s,i,l,r=$(n).attr("coords"),c=r.split(","),u=[],_=[],o=0;o<c.length;o++)o%2?_.push(c[o]):u.push(c[o]);if(a=u.reduce(function(o,e){return Math.max(o,e)}),s=u.reduce(function(o,e){return Math.min(o,e)}),i=_.reduce(function(o,e){return Math.max(o,e)}),l=_.reduce(function(o,e){return Math.min(o,e)}),e<=a&&e>=s&&t<=i+80&&t>=l+80)return $("body").addClass("target-hover"),!1;$("body").removeClass("target-hover")})}),$(".nav-bar__menu--hover").hover(function(){$(".nav-bar__menu--click").toggleClass("hover")},function(){$(".nav-bar__menu--click").toggleClass("hover")}),$(".s-1__btn-orange").hover(function(){animActivated||TweenMax.to(".main__bg-s1__gray3",.4,{y:"-100%",ease:Power1.easeInOut})},function(){animActivated||TweenMax.to(".main__bg-s1__gray3",.4,{y:"0%",ease:Power1.easeInOut})}),$(document).on("click",".nav-bar__menu--click",function(){$(".nav-bar__menu--click").toggleClass("close"),$(".nav-bar__list").toggleClass("hide"),$(".nav-menu").hasClass("opened")?(TweenMax.to(".nav-menu",.5,{y:"100%",display:"none",ease:Power1.easeInOut}),$(".nav-menu").toggleClass("opened")):(TweenMax.killTweensOf(".nav-menu__text, .nav-menu__list-item, .nav-menu__footer"),TweenMax.fromTo(".nav-menu__text",.6,{x:"50%",autoAlpha:0},{x:"0%",autoAlpha:1,delay:.5}),TweenMax.staggerFromTo(".nav-menu__list-item",.6,{x:"50%",autoAlpha:0},{x:"0%",autoAlpha:1,delay:1},.1),TweenMax.fromTo(".nav-menu__footer",.6,{y:"50%",autoAlpha:0},{y:"0%",autoAlpha:1,delay:1.5}),TweenMax.to(".nav-menu",.5,{y:"0%",display:"block",ease:Power1.easeInOut}),$(".nav-menu").toggleClass("opened"))}),$(".s-4__carousel-item--click").on("click",function(){var o=$(this).attr("data-player"),e=$('.sport__popup[data-player="'+o+'"]'),t=$(this).width(),n=($(this).height(),$(this).offset().top),a=$(this).offset().left,s=e.height(),i=e.width(),l=n-s,r=a+t/2-i/2;_detectPhone()&&(r=$(window).width()/2-i/2,$(window).width()<768)||($(this).hasClass("active")?($(this).removeClass("active"),TweenMax.to(e,.4,{autoAlpha:0,display:"none"})):($(".s-4__carousel-item--click").removeClass("active"),$(this).addClass("active"),$(".sport__popup").is(":visible")?TweenMax.to($(".sport__popup"),.3,{autoAlpha:0,display:"none",onComplete:function(){e.css({top:l-40,left:r}),TweenMax.fromTo(e,.4,{autoAlpha:0,display:"none",y:"10%"},{autoAlpha:1,display:"flex",y:"0%"})}}):(e.css({top:l-40,left:r}),TweenMax.fromTo(e,.4,{autoAlpha:0,display:"none",y:"10%"},{autoAlpha:1,display:"flex",y:"0%"})),TMScrollTo(l-40)))}),$(".nav-bar__list-item a").on("click",function(o){o.preventDefault();var e=o.currentTarget.hash,t=$(e).offset().top+1;"#s1"===e&&(t-=80),shootingHide(),TMScrollTo(t)}),$(".nav-menu__list-item a").on("click",function(o){o.preventDefault();var e,t=o.currentTarget.hash;if("pdf/biathlon__rules.pdf"===$(this).attr("href"))return void window.open("pdf/biathlon__rules.pdf","_blank");e=$(t).offset().top+1,"#s1"===t&&(e-=80),shootingHide(),$(".nav-bar__menu--click").toggleClass("close"),$(".nav-bar__list").toggleClass("hide"),TweenMax.to(".nav-menu",.5,{y:"100%",display:"none",ease:Power1.easeInOut,onComplete:function(){$(".nav-menu").toggleClass("opened"),TMScrollTo(e)}})}),$(".s-1__btn-orange, .s-4__btn-orange").on("click",function(o){o.preventDefault(),_detectPhone()?TMScrollTo(0,function(){TweenMax.to(".shooting",.6,{autoAlpha:1,display:"block"}),$("body").addClass("shooting-cursor shooting-mode"),shootingStart()}):TMScrollTo(0,function(){t2.play(),animActivated=!0,$("body").addClass("shooting-cursor shooting-mode"),shootingStart()})}),$(".shooting__back--click").on("click",function(o){o.preventDefault(),shootingHide()}),$(".shooting__img").on("click",function(){$("body").hasClass("target-hover")&&($(".zoomContainer").hide(),TweenMax.to(".shooting__got",.5,{autoAlpha:1,display:"block"}),$(".shooting").addClass("get"))}),$(".shooting__try").on("click",function(o){o.preventDefault(),TweenMax.to(".shooting__got",.5,{autoAlpha:0,display:"none"}),$(".zoomContainer").show(),$(".shooting").removeClass("get")}),$(".shooting__got-niceShot__btn").on("click",function(o){o.preventDefault(),$(".shooting").addClass("got"),TweenMax.to(".shooting__got-niceShot__right",.4,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to(".shooting__got-niceShot__right-down",.4,{autoAlpha:1,display:"flex"})}}),TweenMax.to(".shooting__text",.4,{autoAlpha:0,display:"none"}),TweenMax.to(".shooting__got",.4,{top:"40%"}),TweenMax.to(".shooting__try",.4,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to(".shooting__got-down",.4,{autoAlpha:1,display:"flex"})}})}),$(".main-anchor").on("click",function(o){o.preventDefault();var e=o.currentTarget.hash,t=$(e).offset().top+1;"#s1"===e&&(t-=80),TMScrollTo(t)}),$(".go-away__popup-btn").on("click",function(o){o.preventDefault(),_detectPhone()?TweenMax.to(".go-away__popup-container",.4,{autoAlpha:0,onComplete:function(){TMScrollTo(0,function(){TweenMax.to(".shooting",.6,{autoAlpha:1,display:"block"}),$("body").addClass("shooting-cursor shooting-mode"),shootingStart()})}}):TweenMax.to(".go-away__popup-container",.4,{autoAlpha:0,onComplete:function(){TMScrollTo(0,function(){t2.play(),animActivated=!0,$("body").addClass("shooting-cursor shooting-mode"),shootingStart()})}})}),$(document).on("click",function(o){$(o.target).hasClass("go-away__popup-container")&&TweenMax.to(".go-away__popup-container",.4,{autoAlpha:0})}),$(window).on("beforeunload",function(){return TweenMax.to(".go-away__popup-container",.4,{autoAlpha:1}),""});setInterval(timerIncrement,1e3);if($(this).mousemove(function(o){idleTime=0}),$(this).keypress(function(o){idleTime=0}),$(".s-2__count-down").countdown("2018/02/09 13:00:00",function(o){var e=declOfNum(o.offset.totalDays,["день","дня","дней"]),t=declOfNum(o.offset.hours,["час","часа","часов"]),n=declOfNum(o.offset.minutes,["минута","минуты","минут"]),a=declOfNum(o.offset.seconds,["секунда","секунды","секунд"]);$(".s-2__count-down-item-1").html(o.strftime('<span class="s-2__count-down__num">%D</span><span class="s-2__count-down__text">'+e+"</span>")),$(".s-2__count-down-item-2").html(o.strftime('<span class="s-2__count-down__num">%H</span><span class="s-2__count-down__text">'+t+"</span>")),$(".s-2__count-down-item-3").html(o.strftime('<span class="s-2__count-down__num">%M</span><span class="s-2__count-down__text">'+n+"</span>")),$(".s-2__count-down-item-4").html(o.strftime('<span class="s-2__count-down__num">%S</span><span class="s-2__count-down__text">'+a+"</span>"))}),$("#shooting__map").imageMapResize(),$(".s-4__carousel").slick({infinite:!0,dots:!0,slidesToShow:3,slidesToScroll:3,draggable:!1,responsive:[{breakpoint:992,settings:{slidesToShow:2,slidesToScroll:2}},{breakpoint:767,settings:{slidesToShow:1,slidesToScroll:1,dots:!1}}]}),$(".s-4__carousel").on("beforeChange",function(o,e,t,n){$(window).width()<768||($(".s-4__carousel-item--click").removeClass("active"),TweenMax.to($(".sport__popup"),.3,{autoAlpha:0,display:"none"}))}),$(".s-4__carousel").on("beforeChange",function(o,e,t,n){$(window).width()<768&&TweenMax.to($(".sport__popup"),.2,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to($(".sport__popup").eq(n),.4,{autoAlpha:1,display:"flex"})}})}),_detectPhone()?$(window).width()<768&&(TweenMax.set($(".sport__popup"),{top:$(".s-4__carousel").offset().top+$(".s-4__carousel").height(),left:0}),TweenMax.to($(".sport__popup:first-child"),.4,{autoAlpha:1,display:"flex"})):$("#menu").clipthru({keepClonesInHTML:!0,autoUpdate:!0,autoUpdateInterval:10}),new Clipboard(".shooting__goted-niceShot__copy",{text:function(){return $(".shooting__goted-niceShot__code").text()}}),!_detectPhone()){skrollr.init({edgeStrategy:"set",easing:{WTF:Math.random,inverted:function(o){return 1-o}}})}menuBtnWatch(),bgHeight()});