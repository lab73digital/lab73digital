function declOfNum(e,o){var n=[2,0,1,1,1,2];return o[e%100>4&&e%100<20?2:n[e%10<5?e%10:5]]}function shootingStart(){if($(".zoomContainer").length)return void($(".shooting").hasClass("get")||$(".zoomContainer").show());$(".shooting__img").elevateZoom({zoomType:"lens",lensShape:"round",responsive:!0,lensSize:.01*$(window).width()*16.145833333333336,borderColour:"#00b140",borderSize:1})}function shootingHide(){$(".shooting").is(":visible")&&($("body").removeClass("shooting-cursor shooting-mode"),t2.reverse(),$(".zoomContainer").hide())}function TMScrollTo(e,o){TweenMax.to(window,.6,{scrollTo:e,onComplete:function(){o&&o()}})}function menuBtnWatch(){var e=$(window).scrollTop(),o=$(".main__section"),n=$(".nav-bar__list-item"),t=$(".nav-menu__list-item");o.each(function(o,a){var s=$(a).offset().top,l=s+$(a).height();e>=s&&e<=l&&(n.removeClass("active"),t.removeClass("active"),$('.nav-menu__list-item a[href="#'+$(a).attr("id")+'"]').parent().addClass("active"),$('.nav-bar__list-item a[href="#'+$(a).attr("id")+'"]').parent().addClass("active"))})}function noscroll(){var e=$("html"),o=e.data("scroll-position");window.scrollTo(o[0],o[1])}$.fn.scrollEnd=function(e,o){$(this).scroll(function(){var n=$(this);n.data("scrollTimeout")&&clearTimeout(n.data("scrollTimeout")),n.data("scrollTimeout",setTimeout(e,o))})};var t1,t2,scrll=!1,scP,orngHover=!0;$(function(){t1=new TimelineMax,t2=new TimelineMax({onComplete:function(){$("#shooting__map").imageMapResize()},onReverseComplete:function(){$(".main").removeClass("transition-none").attr("style","").toggleClass("bg-animation1"),scrll&&TMScrollTo(scP,function(){scrll=!1})}}),t1.fromTo(".header",.5,{autoAlpha:0,y:"-100%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut,delay:1}).fromTo(".nav-bar",.5,{autoAlpha:0,right:"-30px"},{autoAlpha:1,right:"30px",ease:Power1.easeInOut}).fromTo(".s-1__title-big",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__title-small",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__text",.5,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power1.easeInOut}).fromTo(".s-1__btn-greenLine, .s-1__btn-orange",.6,{autoAlpha:0,y:"50%"},{autoAlpha:1,y:"0%",ease:Power2.easeInOut});var e=$(window),o=[0,0],n=$("html");n.data("scroll-position",o),e.on("scroll mousewheel",function(e){return o=[e.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,e.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop],$(".nav-menu").hasClass("opened")?void window.addEventListener("scroll",noscroll):$("body").hasClass("shooting-mode")?void window.addEventListener("scroll",noscroll):$(".main").hasClass("bg-animation1")?void window.addEventListener("scroll",noscroll):(n.data("scroll-position",o),window.removeEventListener("scroll",noscroll),void menuBtnWatch())}),e.scrollEnd(function(){$("body").removeClass("scrolling")},50),e.on("mousewheel DOMMouseScroll",function(o){if(o.preventDefault(),!$(".nav-menu").hasClass("opened")&&!$("body").hasClass("shooting-mode")&&!$(".main").hasClass("bg-animation1")){menuBtnWatch();var n=$(document).height()-$(window).height(),t=e.scrollTop();t!==n&&0!==t&&$("body").addClass("scrolling");var a=o.originalEvent.wheelDelta/120||-o.originalEvent.detail/3,s=e.scrollTop(),l=s-parseInt(250*a);TweenMax.to(e,.7,{scrollTo:{y:l,autoKill:!0},ease:Power1.easeOut,autoKill:!0,overwrite:5})}}),$(window).on("resize",function(){$(".zoomContainer").remove(),$(".shooting__img").elevateZoom({zoomType:"lens",lensShape:"round",responsive:!0,lensSize:.01*$(window).width()*16.145833333333336,borderColour:"#00b140",borderSize:1})}),$(document).on("mousemove",function(e){var o=e.pageX,n=e.pageY;$(".shooting__map-target").each(function(e,t){for(var a,s,l,i,r=$(t).attr("coords"),c=r.split(","),u=[],h=[],e=0;e<c.length;e++)e%2?h.push(c[e]):u.push(c[e]);if(a=u.reduce(function(e,o){return Math.max(e,o)}),s=u.reduce(function(e,o){return Math.min(e,o)}),l=h.reduce(function(e,o){return Math.max(e,o)}),i=h.reduce(function(e,o){return Math.min(e,o)}),o<=a&&o>=s&&n<=l&&n>=i)return $("body").addClass("target-hover"),!1;$("body").removeClass("target-hover")})}),$(".nav-bar__menu--hover").hover(function(){$(".nav-bar__menu--click").toggleClass("hover")},function(){$(".nav-bar__menu--click").toggleClass("hover")}),$(".s-1__btn-orange").hover(function(){$(".main").toggleClass("btn-hover")},function(){orngHover&&$(".main").toggleClass("btn-hover")}),$(document).on("click",".nav-bar__menu--click",function(){$(".nav-bar__menu--click").toggleClass("close"),$(".nav-bar__list").toggleClass("hide"),$(".nav-menu").hasClass("opened")?(TweenMax.to(".nav-menu",.5,{y:"100%",display:"none",ease:Power1.easeInOut}),$(".nav-menu").toggleClass("opened")):(TweenMax.killTweensOf(".nav-menu__text, .nav-menu__list-item, .nav-menu__footer"),TweenMax.fromTo(".nav-menu__text",.6,{x:"50%",autoAlpha:0},{x:"0%",autoAlpha:1,delay:.5}),TweenMax.staggerFromTo(".nav-menu__list-item",.6,{x:"50%",autoAlpha:0},{x:"0%",autoAlpha:1,delay:1},.1),TweenMax.fromTo(".nav-menu__footer",.6,{y:"50%",autoAlpha:0},{y:"0%",autoAlpha:1,delay:1.5}),TweenMax.to(".nav-menu",.5,{y:"0%",display:"block",ease:Power1.easeInOut}),$(".nav-menu").toggleClass("opened"))}),$(".s-4__carousel-item--click").on("click",function(){var e=$(".sport__popup"),o=$(this).width(),n=$(this).offset().top,t=$(this).offset().left,a=e.height(),s=e.width(),l=n-a,i=t+o/2-s/2;$(this).hasClass("active")?($(this).removeClass("active"),TweenMax.to(e,.4,{autoAlpha:0,display:"none"})):($(".s-4__carousel-item--click").removeClass("active"),$(this).addClass("active"),e.is(":visible")?TweenMax.to(e,.3,{autoAlpha:0,display:"none",onComplete:function(){e.css({top:l-40,left:i}),TweenMax.fromTo(e,.4,{autoAlpha:0,display:"none",y:"10%"},{autoAlpha:1,display:"flex",y:"0%"})}}):(e.css({top:l-40,left:i}),TweenMax.fromTo(e,.4,{autoAlpha:0,display:"none",y:"10%"},{autoAlpha:1,display:"flex",y:"0%"})))}),$(".nav-bar__list-item a").on("click",function(e){e.preventDefault();var o=e.currentTarget.hash,n=$(o).offset().top+1;"#s1"===o&&(n-=80),shootingHide(),t2.progress()?(scrll=!0,scP=n):TMScrollTo(n)}),$(".main-anchor").on("click",function(e){e.preventDefault();var o=e.currentTarget.hash,n=$(o).offset().top+1;"#s1"===o&&(n-=80),TMScrollTo(n)}),$(".nav-menu__list-item a").on("click",function(e){e.preventDefault();var o=e.currentTarget.hash,n=$(o).offset().top+1;"#s1"===o&&(n-=80),shootingHide(),t2.progress()?($(".nav-bar__menu--click").toggleClass("close"),$(".nav-bar__list").toggleClass("hide"),TweenMax.to(".nav-menu",.5,{y:"100%",display:"none",ease:Power1.easeInOut,onComplete:function(){$(".nav-menu").toggleClass("opened")}}),scrll=!0,scP=n):($(".nav-bar__menu--click").toggleClass("close"),$(".nav-bar__list").toggleClass("hide"),TweenMax.to(".nav-menu",.5,{y:"100%",display:"none",ease:Power1.easeInOut,onComplete:function(){$(".nav-menu").toggleClass("opened"),TMScrollTo(n)}}))}),$(".s-1__btn-orange, .s-4__btn-orange").on("click",function(e){e.preventDefault();var o=3*$(window).height()+600,n=$(window).height();orngHover=!1,TMScrollTo(0,function(){$(".main").toggleClass("bg-animation1"),$(".main").hasClass("btn-hover")&&$(".main").toggleClass("btn-hover"),orngHover=!0,t2.reversed()?t2.reversed(!1):t2.fromTo(".s-1__title-big, .s-1__title-small, .s-1__text, .s-1__btn-greenLine, .s-1__btn-orange",.5,{autoAlpha:1,y:"0%"},{autoAlpha:0,y:"40%",ease:Power1.easeInOut,onComplete:function(){$(".main").addClass("transition-none")}}).to(".main",.5,{backgroundPosition:"center "+n+"px, center -100vh, center 0, center 0, center -70px, center 100vh, 50% 300vh, 50% "+o+"px",ease:Power1.easeInOut}).to(".main",.5,{backgroundPosition:"center "+n+"px, center -100vh, center -100vh, center 0, center -70px, center 100vh, 50% 300vh, 50% "+o+"px",ease:Power1.easeInOut}).to(".main",.5,{backgroundPosition:"center "+n+"px, center -100vh, center -100vh, center -100vh, center -70px, center 100vh, 50% 300vh, 50% "+o+"px",ease:Power1.easeInOut}).to(".shooting",.6,{autoAlpha:1,display:"block"}),$("body").addClass("shooting-cursor shooting-mode"),shootingStart()})}),$(".shooting__back--click").on("click",function(e){e.preventDefault(),shootingHide()}),$(".shooting__img").on("click",function(){$("body").hasClass("target-hover")&&($(".zoomContainer").hide(),TweenMax.to(".shooting__got",.5,{autoAlpha:1,display:"block"}),$(".shooting").addClass("get"))}),$(".shooting__try").on("click",function(e){e.preventDefault(),TweenMax.to(".shooting__got",.5,{autoAlpha:0,display:"none"}),$(".zoomContainer").show(),$(".shooting").removeClass("get")}),$(".shooting__got-niceShot__btn").on("click",function(e){e.preventDefault(),$(".shooting").addClass("got"),TweenMax.to(".shooting__got-niceShot__right",.4,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to(".shooting__got-niceShot__right-down",.4,{autoAlpha:1,display:"flex"})}}),TweenMax.to(".shooting__text",.4,{autoAlpha:0,display:"none"}),TweenMax.to(".shooting__got",.4,{top:"40%"}),TweenMax.to(".shooting__try",.4,{autoAlpha:0,display:"none",onComplete:function(){TweenMax.to(".shooting__got-down",.4,{autoAlpha:1,display:"flex"})}})}),$("#menu").clipthru({keepClonesInHTML:!0,autoUpdate:!0,autoUpdateInterval:10}),$(".s-2__count-down").countdown("2018/02/09 13:00:00",function(e){var o=declOfNum(e.offset.totalDays,["день","дня","дней"]),n=declOfNum(e.offset.hours,["час","часа","часов"]),t=declOfNum(e.offset.minutes,["минута","минуты","минут"]),a=declOfNum(e.offset.seconds,["секунда","секунды","секунд"]);$(".s-2__count-down-item-1").html(e.strftime('<span class="s-2__count-down__num">%D</span><span class="s-2__count-down__text">'+o+"</span>")),$(".s-2__count-down-item-2").html(e.strftime('<span class="s-2__count-down__num">%H</span><span class="s-2__count-down__text">'+n+"</span>")),$(".s-2__count-down-item-3").html(e.strftime('<span class="s-2__count-down__num">%M</span><span class="s-2__count-down__text">'+t+"</span>")),$(".s-2__count-down-item-4").html(e.strftime('<span class="s-2__count-down__num">%S</span><span class="s-2__count-down__text">'+a+"</span>"))}),$("#shooting__map").imageMapResize(),$(".s-4__carousel").slick({infinite:!0,dots:!0,slidesToShow:3,slidesToScroll:3,draggable:!1}),new Clipboard(".shooting__goted-niceShot__copy",{text:function(){return $(".shooting__goted-niceShot__code").text()}});skrollr.init({edgeStrategy:"set",easing:{WTF:Math.random,inverted:function(e){return 1-e}}});menuBtnWatch()});